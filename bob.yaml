nixpkgs: https://github.com/NixOS/nixpkgs/archive/6eed87d4490ce045dda1091999d1e38605afb8ea.tar.gz

dependencies: [go, protobuf, protoc-gen-go, protoc-gen-go-grpc]

build:
  build:
    dependsOn:
      - generate_golang

  generate_golang:
    input: proto/*.proto
    cmd: |
      mkdir -p go
      protoc --proto_path=proto proto/v1/*.proto --go_out=. --go-grpc_out=. --go-grpc_opt=require_unimplemented_servers=false
    target: go
